import{z as B,e as C,r as l,o as n,c as i,b as e,t as b,u as a,A as S,v as k,x as w,y as E,B as m,g as A,C as I,D as R,E as T,a as Z}from"./entry.de7b30d5.js";import{u as M}from"./cookie.1be7fbcf.js";import{u as P}from"./user.4722acf8.js";const W={class:"s-auth"},z={class:"s-auth__container l-wide"},L={class:"s-auth__title"},$={class:"s-auth__formbox"},j=["onSubmit"],q={class:"s-auth__form-label"},G={class:"s-auth__form-label"},H=e("button",{type:"submit",class:"s-auth__form-button"},"Вход",-1),J={key:0,class:"s-auth__form-error"},K={key:0,class:"s-auth__form-error-text"},O={key:1,class:"s-auth__form-error-text"},Q={key:2,class:"s-auth__form-error-text"},X={class:"s-auth__changebox"},Y=e("span",{class:"s-auth__text"},"или",-1),ee=e("span",{class:"s-auth__help"},[e("span",{class:"s-auth__help-bold"},"логин: "),A("test@mail.ru"),e("br"),e("span",{class:"s-auth__help-bold"},"пароль: "),A("123456 ")],-1),se={__name:"s-auth",setup(U){const f=B(),h=P(),x=C(),y=M("userInformation",{default:()=>null,watch:"shallow"});let _=l(!0),s=l(""),r=l(""),u=l(!1),v=l(!1),g=l(!1),p=l(!1),d=l("");const F=()=>_.value=!_.value,V=async()=>{if(!s.value.trim()||!r.value.trim()){u.value=!0;return}const t=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i;if(s.value&&!t.test(s.value)){u.value=!0,v.value=!0;return}if(r.value.length<6){u.value=!0,v.false=!1,g.value=!0;return}u.value=!1,_.value==!0?N():D()},D=async()=>{try{const t=await I(f,s.value,r.value);h.setUser(s.value,t.user.uid);const o={email:s.value,id:t.user.uid,maxAge:60*60*24*7};y.value=o,x.push({path:"/lk"})}catch(t){u.value=!0,p.value=!0,t.message==="Firebase: Error (auth/email-already-in-use)."&&(d.value="Почта уже зарегистрирована.")}},N=async()=>{try{const t=await R(f,s.value,r.value);h.setUser(s.value,t.user.uid);const o={email:s.value,id:t.user.uid,maxAge:60*60*24*7};y.value=o,x.push({path:"/lk"})}catch(t){u.value=!0,p.value=!0,t.message==="Firebase: Error (auth/email-already-in-use)."?d.value="Почта уже зарегистрирована.":t.message==="Firebase: Error (auth/invalid-login-credentials)."&&(d.value="Пользователь не найден")}};return(t,o)=>(n(),i("section",W,[e("div",z,[e("h1",L,b(a(_)?"Войти":"Регистрация"),1),e("div",$,[e("form",{class:"s-auth__form",onSubmit:S(V,["prevent"])},[e("label",q,[k(e("input",{"onUpdate:modelValue":o[0]||(o[0]=c=>E(s)?s.value=c:s=c),class:"s-auth__form-input",type:"text",placeholder:"Почта"},null,512),[[w,a(s)]])]),e("label",G,[k(e("input",{"onUpdate:modelValue":o[1]||(o[1]=c=>E(r)?r.value=c:r=c),class:"s-auth__form-input",type:"password",placeholder:"Пароль"},null,512),[[w,a(r)]])]),H,a(u)?(n(),i("div",J,[a(v)?(n(),i("p",K,"Укажите корректную почту")):m("",!0),a(g)?(n(),i("p",O,"Пароль должен быть из 6 и более символов")):m("",!0),a(p)?(n(),i("p",Q,b(a(d)),1)):m("",!0)])):m("",!0)],40,j),e("div",X,[Y,e("button",{class:"s-auth__button",onClick:F},b(a(_)?"Регистрация":"Войти"),1),ee])])])]))}},te={},ae={class:"s-main"};function re(U,f){const h=se;return n(),i("main",ae,[Z(h)])}const ne=T(te,[["render",re]]);export{ne as default};
